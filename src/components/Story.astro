---
import en from '../i18n/en.json';
import zh from '../i18n/zh.json';
---

<section class="section section-ivory" id="story">
  <div class="container container-narrow">
    <header class="section-header" data-animate>
      <h2 class="section-title">
        <span data-lang-en>{en.story.title}</span>
        <span data-lang-zh style="display: none;">{zh.story.title}</span>
      </h2>
      <p class="section-subtitle">
        <span data-lang-en>{en.story.subtitle}</span>
        <span data-lang-zh style="display: none;">{zh.story.subtitle}</span>
      </p>
      <div class="divider">
        <span class="divider-icon">&#10047;</span>
      </div>
    </header>

    <div class="story-timeline">
      {en.story.content.map((item, index) => (
        <article class="story-item" data-animate style={`animation-delay: ${0.2 * (index + 1)}s`}>
          <div class="story-marker">
            <span class="story-number">{index + 1}</span>
          </div>
          <div class="story-content">
            <h3 class="story-title">
              <span data-lang-en>{item.title}</span>
              <span data-lang-zh style="display: none;">{zh.story.content[index].title}</span>
            </h3>
            <p class="story-text">
              <span data-lang-en>{item.text}</span>
              <span data-lang-zh style="display: none;">{zh.story.content[index].text}</span>
            </p>
          </div>
        </article>
      ))}
    </div>
  </div>
</section>

<style>
  .section-header {
    text-align: center;
    margin-bottom: var(--space-12);
  }

  .story-timeline {
    position: relative;
    padding-left: var(--space-12);
  }

  .story-timeline::before {
    content: '';
    position: absolute;
    left: 20px;
    top: 0;
    bottom: 0;
    width: 2px;
    background: linear-gradient(
      180deg,
      var(--color-sage-light) 0%,
      var(--color-sage) 50%,
      var(--color-sage-light) 100%
    );
  }

  .story-item {
    position: relative;
    margin-bottom: var(--space-10);
  }

  .story-item:last-child {
    margin-bottom: 0;
  }

  .story-marker {
    position: absolute;
    left: calc(-1 * var(--space-12) + 8px);
    width: 26px;
    height: 26px;
    background-color: var(--color-sage);
    border-radius: var(--radius-full);
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 0 0 4px var(--color-ivory);
  }

  .story-number {
    font-family: var(--font-serif);
    font-size: var(--text-sm);
    color: var(--color-white);
    font-weight: 500;
  }

  .story-content {
    background-color: var(--color-white);
    padding: var(--space-6);
    border-radius: var(--radius-base);
    box-shadow: var(--shadow-sm);
  }

  .story-title {
    font-family: var(--font-serif);
    font-size: var(--text-2xl);
    color: var(--color-charcoal);
    margin-bottom: var(--space-3);
    font-weight: 500;
  }

  .story-text {
    font-family: var(--font-sans);
    color: var(--color-gray);
    line-height: 1.8;
    font-size: var(--text-base);
  }

  /* Responsive */
  @media (max-width: 768px) {
    .story-timeline {
      padding-left: var(--space-10);
    }

    .story-timeline::before {
      left: 15px;
    }

    .story-marker {
      left: calc(-1 * var(--space-10) + 4px);
      width: 22px;
      height: 22px;
    }

    .story-content {
      padding: var(--space-4);
    }
  }
</style>
